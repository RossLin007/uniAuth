---
  openapi: "3.0.3"
  info: 
    title: "UniAuth API"
    description: "\n# UniAuth ç»Ÿä¸€è®¤è¯æœåŠ¡ API\n\nUniAuth æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ç»Ÿä¸€è®¤è¯æœåŠ¡ï¼Œæ”¯æŒå¤šç§ç™»å½•æ–¹å¼å’Œ OAuth 2.0 æä¾›å•†åŠŸèƒ½ã€‚\n\n## ç‰¹æ€§\n\n- ğŸ“± æ‰‹æœºéªŒè¯ç ç™»å½•\n- ğŸ“§ é‚®ç®±å¯†ç ç™»å½•\n- ğŸ” OAuth 2.0 ç¤¾äº¤ç™»å½• (Google, GitHub, WeChat)\n- ğŸ« JWT Token ç®¡ç†\n- ğŸ”„ Token è‡ªåŠ¨åˆ·æ–°\n- ğŸ“Š å¤šè®¾å¤‡ä¼šè¯ç®¡ç†\n- ğŸ¢ OAuth 2.0 Provider èƒ½åŠ›\n\n## è®¤è¯æ–¹å¼\n\nå¤§å¤šæ•° API éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ Bearer Tokenï¼š\n\n```\nAuthorization: Bearer <access_token>\n```\n\n## é”™è¯¯å¤„ç†\n\næ‰€æœ‰ API è¿”å›ç»Ÿä¸€çš„é”™è¯¯æ ¼å¼ï¼š\n\n```json\n{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"ERROR_CODE\",\n    \"message\": \"Human-readable error message\"\n  }\n}\n```\n        "
    version: "1.0.0"
    contact: 
      name: "UniAuth Support"
      url: "https://github.com/your-org/uniauth"
    license: 
      name: "MIT"
      url: "https://opensource.org/licenses/MIT"
  servers: 
    - 
      url: "http://localhost:3000"
      description: "Development Server"
    - 
      url: "https://auth.example.com"
      description: "Production Server"
  tags: 
    - 
      name: "Health"
      description: "å¥åº·æ£€æŸ¥ / Health Check"
    - 
      name: "Authentication"
      description: "è®¤è¯ç›¸å…³ / Authentication"
    - 
      name: "User"
      description: "ç”¨æˆ·ç®¡ç† / User Management"
    - 
      name: "OAuth2"
      description: "OAuth 2.0 æä¾›å•† / OAuth 2.0 Provider"
  paths: 
    /health: 
      get: 
        tags: 
          - "Health"
        summary: "ç®€å•å¥åº·æ£€æŸ¥ / Simple Health Check"
        description: "è¿”å›æœåŠ¡è¿è¡ŒçŠ¶æ€ï¼Œç”¨äºè´Ÿè½½å‡è¡¡å™¨"
        responses: 
          200: 
            description: "æœåŠ¡æ­£å¸¸"
            content: 
              application/json: 
                schema: 
                  type: "object"
                  properties: 
                    status: 
                      type: "string"
                      example: "ok"
                    timestamp: 
                      type: "string"
                      format: "date-time"
    /health/ready: 
      get: 
        tags: 
          - "Health"
        summary: "å°±ç»ªæ£€æŸ¥ / Readiness Check"
        description: "æ·±åº¦å¥åº·æ£€æŸ¥ï¼ŒéªŒè¯æ•°æ®åº“å’Œ Redis è¿æ¥"
        responses: 
          200: 
            description: "æ‰€æœ‰ä¾èµ–æ­£å¸¸"
            content: 
              application/json: 
                schema: 
                  type: "object"
                  properties: 
                    status: 
                      type: "string"
                      enum: 
                        - "healthy"
                        - "degraded"
                    checks: 
                      type: "object"
                      properties: 
                        database: 
                          type: "object"
                        redis: 
                          type: "object"
                        memory: 
                          type: "object"
                    version: 
                      type: "string"
                    uptime: 
                      type: "number"
          503: 
            description: "æœåŠ¡é™çº§"
    /api/v1/auth/phone/send-code: 
      post: 
        tags: 
          - "Authentication"
        summary: "å‘é€æ‰‹æœºéªŒè¯ç  / Send Phone Verification Code"
        description: "å‘æ‰‹æœºå‘é€éªŒè¯ç "
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  phone: 
                    type: "string"
                    example: "+8613800138000"
                required: 
                  - "phone"
        responses: 
          200: 
            description: "éªŒè¯ç å‘é€æˆåŠŸ"
            content: 
              application/json: 
                schema: 
                  type: "object"
                  properties: 
                    success: 
                      type: "boolean"
                      example: true
                    data: 
                      type: "object"
                      properties: 
                        expires_in: 
                          type: "number"
                          example: 300
                        retry_after: 
                          type: "number"
                          example: 60
          429: 
            description: "è¯·æ±‚è¿‡äºé¢‘ç¹"
    /api/v1/auth/phone/verify: 
      post: 
        tags: 
          - "Authentication"
        summary: "æ‰‹æœºéªŒè¯ç ç™»å½• / Phone Code Login"
        description: "ä½¿ç”¨æ‰‹æœºéªŒè¯ç ç™»å½•æˆ–æ³¨å†Œ"
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  phone: 
                    type: "string"
                    example: "+8613800138000"
                  code: 
                    type: "string"
                    example: "123456"
                required: 
                  - "phone"
                  - "code"
        responses: 
          200: 
            description: "ç™»å½•æˆåŠŸ"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/LoginResponse"
          401: 
            description: "éªŒè¯ç é”™è¯¯æˆ–å·²è¿‡æœŸ"
    /api/v1/auth/email/send-code: 
      post: 
        tags: 
          - "Authentication"
        summary: "å‘é€é‚®ç®±éªŒè¯ç  / Send Email Verification Code"
        description: "å‘é‚®ç®±å‘é€éªŒè¯ç "
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  email: 
                    type: "string"
                    format: "email"
                  type: 
                    type: "string"
                    enum: 
                      - "login"
                      - "register"
                      - "reset"
                      - "email_verify"
                    default: "login"
                required: 
                  - "email"
        responses: 
          200: 
            description: "éªŒè¯ç å‘é€æˆåŠŸ"
          429: 
            description: "è¯·æ±‚è¿‡äºé¢‘ç¹"
    /api/v1/auth/email/verify: 
      post: 
        tags: 
          - "Authentication"
        summary: "é‚®ç®±éªŒè¯ç ç™»å½• / Email Code Login"
        description: "ä½¿ç”¨é‚®ç®±éªŒè¯ç ç™»å½•"
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  email: 
                    type: "string"
                    format: "email"
                  code: 
                    type: "string"
                    example: "123456"
                required: 
                  - "email"
                  - "code"
        responses: 
          200: 
            description: "ç™»å½•æˆåŠŸ"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/LoginResponse"
          401: 
            description: "éªŒè¯ç é”™è¯¯æˆ–å·²è¿‡æœŸ"
    /api/v1/auth/email/login: 
      post: 
        tags: 
          - "Authentication"
        summary: "é‚®ç®±å¯†ç ç™»å½• / Email Password Login"
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  email: 
                    type: "string"
                    format: "email"
                  password: 
                    type: "string"
                    minLength: 8
                required: 
                  - "email"
                  - "password"
        responses: 
          200: 
            description: "ç™»å½•æˆåŠŸ"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/LoginResponse"
          401: 
            description: "é‚®ç®±æˆ–å¯†ç é”™è¯¯"
    /api/v1/auth/refresh: 
      post: 
        tags: 
          - "Authentication"
        summary: "åˆ·æ–°ä»¤ç‰Œ / Refresh Token"
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  refresh_token: 
                    type: "string"
                required: 
                  - "refresh_token"
        responses: 
          200: 
            description: "åˆ·æ–°æˆåŠŸ"
            content: 
              application/json: 
                schema: 
                  type: "object"
                  properties: 
                    success: 
                      type: "boolean"
                    data: 
                      type: "object"
                      properties: 
                        access_token: 
                          type: "string"
                        refresh_token: 
                          type: "string"
                        expires_in: 
                          type: "number"
    /api/v1/auth/logout: 
      post: 
        tags: 
          - "Authentication"
        summary: "ç™»å‡º / Logout"
        security: 
          - 
            bearerAuth: []
        requestBody: 
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  refresh_token: 
                    type: "string"
        responses: 
          200: 
            description: "ç™»å‡ºæˆåŠŸ"
    /api/v1/auth/logout-all: 
      post: 
        tags: 
          - "Authentication"
        summary: "å…¨è®¾å¤‡ç™»å‡º / Logout All Devices"
        security: 
          - 
            bearerAuth: []
        responses: 
          200: 
            description: "å…¨éƒ¨è®¾å¤‡ç™»å‡ºæˆåŠŸ"
    /api/v1/auth/email/register: 
      post: 
        tags: 
          - "Authentication"
        summary: "é‚®ç®±æ³¨å†Œ / Email Registration"
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  email: 
                    type: "string"
                    format: "email"
                  password: 
                    type: "string"
                    minLength: 8
                  code: 
                    type: "string"
                    description: "é‚®ç®±éªŒè¯ç "
                required: 
                  - "email"
                  - "password"
        responses: 
          200: 
            description: "æ³¨å†ŒæˆåŠŸ"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/LoginResponse"
          400: 
            description: "é‚®ç®±å·²å­˜åœ¨æˆ–éªŒè¯ç é”™è¯¯"
    /api/v1/auth/verify: 
      post: 
        tags: 
          - "Authentication"
        summary: "éªŒè¯ Token / Verify Token"
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  token: 
                    type: "string"
                required: 
                  - "token"
        responses: 
          200: 
            description: "Token æœ‰æ•ˆ"
          401: 
            description: "Token æ— æ•ˆæˆ–å·²è¿‡æœŸ"
    /api/v1/auth/google: 
      get: 
        tags: 
          - "Authentication"
        summary: "Google OAuth ç™»å½• / Google OAuth Login"
        description: "é‡å®šå‘åˆ° Google ç™»å½•é¡µé¢"
        responses: 
          302: 
            description: "é‡å®šå‘åˆ° Google"
    /api/v1/auth/github: 
      get: 
        tags: 
          - "Authentication"
        summary: "GitHub OAuth ç™»å½• / GitHub OAuth Login"
        description: "é‡å®šå‘åˆ° GitHub ç™»å½•é¡µé¢"
        responses: 
          302: 
            description: "é‡å®šå‘åˆ° GitHub"
    /api/v1/auth/wechat: 
      get: 
        tags: 
          - "Authentication"
        summary: "å¾®ä¿¡ OAuth ç™»å½• / WeChat OAuth Login"
        description: "é‡å®šå‘åˆ°å¾®ä¿¡ç™»å½•é¡µé¢"
        responses: 
          302: 
            description: "é‡å®šå‘åˆ°å¾®ä¿¡"
    /api/v1/user/me: 
      get: 
        tags: 
          - "User"
        summary: "è·å–å½“å‰ç”¨æˆ· / Get Current User"
        security: 
          - 
            bearerAuth: []
        responses: 
          200: 
            description: "æˆåŠŸ"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/UserResponse"
          401: 
            description: "æœªè®¤è¯"
      patch: 
        tags: 
          - "User"
        summary: "æ›´æ–°ç”¨æˆ·èµ„æ–™ / Update Profile"
        security: 
          - 
            bearerAuth: []
        requestBody: 
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  nickname: 
                    type: "string"
                  avatar_url: 
                    type: "string"
                    format: "uri"
        responses: 
          200: 
            description: "æ›´æ–°æˆåŠŸ"
    /api/v1/user/sessions: 
      get: 
        tags: 
          - "User"
        summary: "è·å–ç™»å½•è®¾å¤‡ / Get Sessions"
        security: 
          - 
            bearerAuth: []
        responses: 
          200: 
            description: "æˆåŠŸ"
    /api/v1/user/sessions/{id}: 
      delete: 
        tags: 
          - "User"
        summary: "æ’¤é”€ç‰¹å®šä¼šè¯ / Revoke Session"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            name: "id"
            in: "path"
            required: true
            schema: 
              type: "string"
        responses: 
          200: 
            description: "æ’¤é”€æˆåŠŸ"
          404: 
            description: "ä¼šè¯ä¸å­˜åœ¨"
    /api/v1/user/bindings: 
      get: 
        tags: 
          - "User"
        summary: "è·å–è´¦æˆ·ç»‘å®š / Get Account Bindings"
        security: 
          - 
            bearerAuth: []
        responses: 
          200: 
            description: "æˆåŠŸ"
            content: 
              application/json: 
                schema: 
                  type: "object"
                  properties: 
                    success: 
                      type: "boolean"
                    data: 
                      type: "array"
                      items: 
                        type: "object"
                        properties: 
                          provider: 
                            type: "string"
                          provider_user_id: 
                            type: "string"
                          created_at: 
                            type: "string"
                            format: "date-time"
    /api/v1/user/unbind/{provider}: 
      delete: 
        tags: 
          - "User"
        summary: "è§£ç»‘ OAuth è´¦æˆ· / Unbind OAuth"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            name: "provider"
            in: "path"
            required: true
            schema: 
              type: "string"
              enum: 
                - "google"
                - "github"
                - "wechat"
        responses: 
          200: 
            description: "è§£ç»‘æˆåŠŸ"
          400: 
            description: "æ— æ³•è§£ç»‘ï¼ˆå”¯ä¸€ç™»å½•æ–¹å¼ï¼‰"
    /api/v1/user/bind/phone: 
      post: 
        tags: 
          - "User"
        summary: "ç»‘å®šæ‰‹æœºå· / Bind Phone"
        security: 
          - 
            bearerAuth: []
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  phone: 
                    type: "string"
                  code: 
                    type: "string"
                required: 
                  - "phone"
                  - "code"
        responses: 
          200: 
            description: "ç»‘å®šæˆåŠŸ"
          400: 
            description: "éªŒè¯ç é”™è¯¯æˆ–æ‰‹æœºå·å·²è¢«ä½¿ç”¨"
    /api/v1/user/bind/email: 
      post: 
        tags: 
          - "User"
        summary: "ç»‘å®šé‚®ç®± / Bind Email"
        security: 
          - 
            bearerAuth: []
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  email: 
                    type: "string"
                    format: "email"
                  code: 
                    type: "string"
                required: 
                  - "email"
                  - "code"
        responses: 
          200: 
            description: "ç»‘å®šæˆåŠŸ"
          400: 
            description: "éªŒè¯ç é”™è¯¯æˆ–é‚®ç®±å·²è¢«ä½¿ç”¨"
    /api/v1/user/authorized-apps: 
      get: 
        tags: 
          - "User"
        summary: "è·å–å·²æˆæƒåº”ç”¨ / Get Authorized Apps"
        security: 
          - 
            bearerAuth: []
        responses: 
          200: 
            description: "æˆåŠŸ"
    /api/v1/user/authorized-apps/{clientId}: 
      delete: 
        tags: 
          - "User"
        summary: "æ’¤é”€åº”ç”¨æˆæƒ / Revoke App Authorization"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            name: "clientId"
            in: "path"
            required: true
            schema: 
              type: "string"
        responses: 
          200: 
            description: "æ’¤é”€æˆåŠŸ"
    /api/v1/mfa/status: 
      get: 
        tags: 
          - "MFA"
        summary: "è·å– MFA çŠ¶æ€ / Get MFA Status"
        security: 
          - 
            bearerAuth: []
        responses: 
          200: 
            description: "æˆåŠŸ"
            content: 
              application/json: 
                schema: 
                  type: "object"
                  properties: 
                    success: 
                      type: "boolean"
                    data: 
                      type: "object"
                      properties: 
                        enabled: 
                          type: "boolean"
                        methods: 
                          type: "array"
                          items: 
                            type: "string"
    /api/v1/mfa/setup: 
      post: 
        tags: 
          - "MFA"
        summary: "å¼€å§‹ MFA è®¾ç½® / Start MFA Setup"
        security: 
          - 
            bearerAuth: []
        responses: 
          200: 
            description: "æˆåŠŸ"
            content: 
              application/json: 
                schema: 
                  type: "object"
                  properties: 
                    success: 
                      type: "boolean"
                    data: 
                      type: "object"
                      properties: 
                        secret: 
                          type: "string"
                        qrCode: 
                          type: "string"
                          description: "Base64 QR code image"
    /api/v1/mfa/verify-setup: 
      post: 
        tags: 
          - "MFA"
        summary: "éªŒè¯ MFA è®¾ç½® / Verify MFA Setup"
        security: 
          - 
            bearerAuth: []
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  code: 
                    type: "string"
                    minLength: 6
                    maxLength: 6
                required: 
                  - "code"
        responses: 
          200: 
            description: "MFA å¯ç”¨æˆåŠŸ"
            content: 
              application/json: 
                schema: 
                  type: "object"
                  properties: 
                    success: 
                      type: "boolean"
                    data: 
                      type: "object"
                      properties: 
                        recoveryCodes: 
                          type: "array"
                          items: 
                            type: "string"
    /api/v1/mfa/verify: 
      post: 
        tags: 
          - "MFA"
        summary: "éªŒè¯ MFA ä»£ç  / Verify MFA Code"
        security: 
          - 
            bearerAuth: []
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  code: 
                    type: "string"
                required: 
                  - "code"
        responses: 
          200: 
            description: "MFA éªŒè¯æˆåŠŸ"
          400: 
            description: "éªŒè¯ç é”™è¯¯"
    /api/v1/mfa/disable: 
      post: 
        tags: 
          - "MFA"
        summary: "ç¦ç”¨ MFA / Disable MFA"
        security: 
          - 
            bearerAuth: []
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  code: 
                    type: "string"
                required: 
                  - "code"
        responses: 
          200: 
            description: "MFA å·²ç¦ç”¨"
    /api/v1/mfa/regenerate-recovery: 
      post: 
        tags: 
          - "MFA"
        summary: "é‡æ–°ç”Ÿæˆæ¢å¤ç  / Regenerate Recovery Codes"
        security: 
          - 
            bearerAuth: []
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  code: 
                    type: "string"
                required: 
                  - "code"
        responses: 
          200: 
            description: "æˆåŠŸ"
            content: 
              application/json: 
                schema: 
                  type: "object"
                  properties: 
                    success: 
                      type: "boolean"
                    data: 
                      type: "object"
                      properties: 
                        recoveryCodes: 
                          type: "array"
                          items: 
                            type: "string"
    /api/v1/oauth2/validate: 
      get: 
        tags: 
          - "OAuth2"
        summary: "éªŒè¯å®¢æˆ·ç«¯ / Validate Client"
        description: "éªŒè¯ OAuth2 å®¢æˆ·ç«¯ä¿¡æ¯å’Œå›è°ƒåœ°å€"
        parameters: 
          - 
            name: "client_id"
            in: "query"
            required: true
            schema: 
              type: "string"
          - 
            name: "redirect_uri"
            in: "query"
            required: true
            schema: 
              type: "string"
              format: "uri"
          - 
            name: "response_type"
            in: "query"
            required: true
            schema: 
              type: "string"
              enum: 
                - "code"
          - 
            name: "scope"
            in: "query"
            schema: 
              type: "string"
          - 
            name: "state"
            in: "query"
            schema: 
              type: "string"
          - 
            name: "code_challenge"
            in: "query"
            schema: 
              type: "string"
              description: "PKCE code challenge"
          - 
            name: "code_challenge_method"
            in: "query"
            schema: 
              type: "string"
              enum: 
                - "S256"
                - "plain"
        responses: 
          200: 
            description: "å®¢æˆ·ç«¯éªŒè¯æˆåŠŸ"
          400: 
            description: "æ— æ•ˆçš„å®¢æˆ·ç«¯æˆ–å›è°ƒåœ°å€"
    /api/v1/oauth2/authorize: 
      post: 
        tags: 
          - "OAuth2"
        summary: "æˆæƒè¯·æ±‚ / Authorization Request"
        description: "ç”¨æˆ·åŒæ„æˆæƒåè°ƒç”¨ï¼Œç”Ÿæˆæˆæƒç "
        security: 
          - 
            bearerAuth: []
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  client_id: 
                    type: "string"
                  redirect_uri: 
                    type: "string"
                    format: "uri"
                  response_type: 
                    type: "string"
                    enum: 
                      - "code"
                  scope: 
                    type: "string"
                  state: 
                    type: "string"
                  code_challenge: 
                    type: "string"
                  code_challenge_method: 
                    type: "string"
                    enum: 
                      - "S256"
                      - "plain"
                required: 
                  - "client_id"
                  - "redirect_uri"
                  - "response_type"
        responses: 
          200: 
            description: "æˆæƒæˆåŠŸï¼Œè¿”å›é‡å®šå‘ URL"
            content: 
              application/json: 
                schema: 
                  type: "object"
                  properties: 
                    success: 
                      type: "boolean"
                    data: 
                      type: "object"
                      properties: 
                        redirect_url: 
                          type: "string"
                          format: "uri"
    /api/v1/oauth2/token: 
      post: 
        tags: 
          - "OAuth2"
        summary: "ä»¤ç‰Œäº¤æ¢ / Token Exchange"
        description: "ä½¿ç”¨æˆæƒç æ¢å–è®¿é—®ä»¤ç‰Œ"
        requestBody: 
          required: true
          content: 
            application/x-www-form-urlencoded: 
              schema: 
                type: "object"
                properties: 
                  grant_type: 
                    type: "string"
                    enum: 
                      - "authorization_code"
                  client_id: 
                    type: "string"
                  client_secret: 
                    type: "string"
                  code: 
                    type: "string"
                  redirect_uri: 
                    type: "string"
                    format: "uri"
                  code_verifier: 
                    type: "string"
                    description: "PKCE code verifier"
                required: 
                  - "grant_type"
                  - "client_id"
                  - "code"
                  - "redirect_uri"
            application/json: 
              schema: 
                type: "object"
                properties: 
                  grant_type: 
                    type: "string"
                    enum: 
                      - "authorization_code"
                  client_id: 
                    type: "string"
                  client_secret: 
                    type: "string"
                  code: 
                    type: "string"
                  redirect_uri: 
                    type: "string"
                    format: "uri"
                  code_verifier: 
                    type: "string"
                required: 
                  - "grant_type"
                  - "client_id"
                  - "code"
                  - "redirect_uri"
        responses: 
          200: 
            description: "ä»¤ç‰Œäº¤æ¢æˆåŠŸ"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/OAuth2TokenResponse"
          400: 
            description: "è¯·æ±‚æ— æ•ˆ"
    /api/v1/oauth2/userinfo: 
      get: 
        tags: 
          - "OAuth2"
        summary: "ç”¨æˆ·ä¿¡æ¯ / User Info"
        description: "OIDC å…¼å®¹çš„ç”¨æˆ·ä¿¡æ¯ç«¯ç‚¹"
        security: 
          - 
            bearerAuth: []
        responses: 
          200: 
            description: "æˆåŠŸ"
            content: 
              application/json: 
                schema: 
                  type: "object"
                  properties: 
                    sub: 
                      type: "string"
                      description: "User ID"
                    name: 
                      type: "string"
                    email: 
                      type: "string"
                    email_verified: 
                      type: "boolean"
                    phone_number: 
                      type: "string"
                    phone_number_verified: 
                      type: "boolean"
                    picture: 
                      type: "string"
                      format: "uri"
  components: 
    securitySchemes: 
      bearerAuth: 
        type: "http"
        scheme: "bearer"
        bearerFormat: "JWT"
        description: "JWT Access Token"
    schemas: 
      LoginResponse: 
        type: "object"
        properties: 
          success: 
            type: "boolean"
            example: true
          data: 
            type: "object"
            properties: 
              user: 
                $ref: "#/components/schemas/User"
              access_token: 
                type: "string"
              refresh_token: 
                type: "string"
              expires_in: 
                type: "number"
                example: 3600
              is_new_user: 
                type: "boolean"
      UserResponse: 
        type: "object"
        properties: 
          success: 
            type: "boolean"
          data: 
            $ref: "#/components/schemas/User"
      User: 
        type: "object"
        properties: 
          id: 
            type: "string"
            format: "uuid"
          phone: 
            type: "string"
            nullable: true
          email: 
            type: "string"
            format: "email"
            nullable: true
          nickname: 
            type: "string"
            nullable: true
          avatar_url: 
            type: "string"
            format: "uri"
            nullable: true
      OAuth2TokenResponse: 
        type: "object"
        properties: 
          access_token: 
            type: "string"
          token_type: 
            type: "string"
            example: "Bearer"
          expires_in: 
            type: "number"
            example: 3600
          refresh_token: 
            type: "string"
      Error: 
        type: "object"
        properties: 
          success: 
            type: "boolean"
            example: false
          error: 
            type: "object"
            properties: 
              code: 
                type: "string"
              message: 
                type: "string"

